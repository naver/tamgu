# Αυτοπεριλαμβανόμενοι Εμπορευματοκιβώτιοι

Στο Tamgu, υπάρχουν δύο τύποι εμπορευματοκιβωτίων: εμπορευματοκιβώτια τιμών και εμπορευματοκιβώτια αντικειμένων.

## Εμπορευματοκιβώτια τιμών
Τα εμπορευματοκιβώτια τιμών περιλαμβάνουν τα svector, ivector και mapii. Αυτά τα εμπορευματοκιβώτια κρατούν τιμές.

## Εμπορευματοκιβώτια αντικειμένων
Τα εμπορευματοκιβώτια αντικειμένων περιλαμβάνουν τα vector, map, treemap, table και list. Αυτά τα εμπορευματοκιβώτια κρατούν αντικείμενα.

## Βρόχοι σε Εμπορευματοκιβώτια αντικειμένων
Είναι δυνατό να περιλαμβάνεται ένα εμπορευματοκιβώτιο μέσα σε ένα άλλο εμπορευματοκιβώτιο, ακόμα και ένα εμπορευματοκιβώτιο που περιλαμβάνει τον εαυτό του. Ωστόσο, όταν ένα εμπορευματοκιβώτιο περιλαμβάνει τον εαυτό του, δεν μπορεί να εμφανιστεί ολόκληρη η δομή. Αντ' αυτού, το σύστημα θα αντικαταστήσει την αυταναφορά με "[...]" ή "{...}" αν είναι ένας χάρτης.

Παράδειγμα:

```cpp
vector v = [1..5];
v.push(v);
println(v);
```

Έξοδος: `v is: [1,2,3,4,5,[...]]`, όπου "[...]" υποδηλώνει μια αυταναφορά.

Είναι σημαντικό να σημειωθεί ότι αν ένα εμπορευματοκιβώτιο περιλαμβάνει τον εαυτό του, μπορεί να υπάρξει πρόβλημα με τη διάσχιση της δομής, καθώς μπορεί να οδηγήσει σε έναν άπειρο βρόχο.

## Σήμανση Μεθόδων
Το Tamgu παρέχει τρεις μεθόδους για να βοηθήσει στην αντιμετώπιση αυτού του προβλήματος:

α) `mark(byte v)`: Αυτή η μέθοδος τοποθετεί ένα σήμα σε ένα εμπορευματοκιβώτιο αντικειμένων.

β) `mark()`: Αυτή η μέθοδος επιστρέφει το σήμα σε ένα εμπορευματοκιβώτιο αντικειμένων.

γ) `unmark()`: Αυτή η μέθοδος αφαιρεί όλα τα σήματα από ένα εμπορευματοκιβώτιο αντικειμένων.

Παράδειγμα:

```cpp
vector v = [10..50:10];
v.push([60..80:10]);
v.push(v);
println(v);

function traversal(self v, int i) {
  if (i == v.size()) {
    println('Τέλος του vector');
    return;
  }
  if (v[i].mark() == 1) {
    println("Ήδη αναλύθηκε");
    return;
  }
  println(i, v[i]);
  v[i].mark(1);
  if (v[i].iscontainer()) {
    println("Αυτή η τιμή είναι ένα εμπορευματοκιβώτιο...");
    traversal(v[i], 0);
  }
  traversal(v, i + 1);
}

// Σημειώνουμε το vector μας για να αποφύγουμε την διάσχισή του δύο φορές
v.mark(1);
traversal(v, 0);

// Απομαρκάρουμε όλα τα στοιχεία μαζί
v.unmark();

// Έξοδος:
// [10,20,30,40,50,[60,70,80],[...]], περιέχει μια αυταναφορά
// Η εκτέλεση
// 0 10
// 1 20
// 2 30
// 3 40
// 4 50
// 5 [60,70,80]
// Αυτή η τιμή είναι ένα εμπορευματοκιβώτιο...
// 0 60
// 1 70
// 2 80
// Τέλος του vector
// Ήδη αναλύθηκε
// τέλος
```