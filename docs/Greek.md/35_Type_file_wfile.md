# Διαχείριση Αρχείων

Ο τύπος `file` χρησιμοποιείται για τη διαχείριση αρχείων εισόδου και εξόδου. Ο τύπος `wfile` χρησιμοποιείται ειδικά για τη χειρισμό UTF16 (UCS-2) αρχείων.

## Μέθοδοι

1. `eof()`: Επιστρέφει true όταν φτάνει στο τέλος του αρχείου.
2. `file f(string filename, string mode_read)`: Ανοίγει ένα αρχείο ανάλογα με το καθορισμένο `mode_read`. Αν το αρχείο είναι σε λειτουργία ανάγνωσης, το `mode_read` είναι προαιρετικό. Δυνατές τιμές για το `mode_read` είναι:
   - "a": προσάρτηση
   - "r": ανάγνωση
   - "w": εγγραφή
   - "w+": προσάρτηση
3. `find(string s, bool case_insensitive)`: Επιστρέφει όλες τις θέσεις στο αρχείο όπου βρίσκεται η συμβολοσειρά `s`.
4. `get()`: Διαβάζει έναν χαρακτήρα από το αρχείο.
5. `get_signature()`: Επιστρέφει εάν το αρχείο περιέχει μια υπογραφή.
6. `open_append(string filename)`: Ανοίγει ένα αρχείο σε λειτουργία προσάρτησης.
7. `open_read(string filename)`: Ανοίγει ένα αρχείο σε λειτουργία ανάγνωσης.
8. `open_write(string filename)`: Ανοίγει ένα αρχείο σε λειτουργία εγγραφής.
9. `read()`: Διαβάζει ολόκληρο το αρχείο σε μια μεταβλητή, η οποία μπορεί να είναι:
   - string: ολόκληρο το έγγραφο αποθηκεύεται σε ένα string
   - svector: το έγγραφο χωρίζεται σε strings κατά μήκος των αλλαγών γραμμής, με κάθε string να αποθηκεύεται στον πίνακα
   - bvector: το έγγραφο αποθηκεύεται byte με byte στον πίνακα
   - ivector: το έγγραφο αποθηκεύεται byte με byte στον πίνακα
10. `read(int nb)`: Παρόμοια με το `read()`, αλλά εξάγει μόνο "nb" χαρακτήρες ή bytes από το αρχείο.
11. `readln()`: Διαβάζει μια γραμμή από το αρχείο.
12. `seek(int p)`: Τοποθετεί τον δρομέα του αρχείου στη θέση `p`.
13. `set_signature(bool s)`: Ορίζει την υπογραφή UTF8 ή UTF16 αναλόγως.
14. `tell()`: Επιστρέφει τη θέση του δρομέα του αρχείου.
15. `unget()`: Επιστρέφει έναν χαρακτήρα στη ροή.
16. `unget(nb)`: Επιστρέφει `nb` χαρακτήρες στη ροή.
17. `scan(string grammar, string separator)`: Διαβάζει ένα αρχείο με ένα Tangu Regular Expression και επιστρέφει έναν πίνακα από υποσυμβολοσειρές. Το διαχωριστικό είναι ένας χαρακτήρας που διαχωρίζει ένα πεδίο από ένα άλλο (η προεπιλογή είναι ένα κενό).
18. `write(string s1, string s2, ...)`: Γράφει το string `s` στο αρχείο.
19. `writelen(string s1, string s2, ...)`: Γράφει strings στο αρχείο, χωρίζοντας κάθε string με ένα κενό και προσθέτοντας μια αλλαγή γραμμής στο τέλος της γραμμής.
20. `writebin(int s1, int s2, ...)`: Γράφει bytes στο αρχείο. Εάν η τιμή είναι ένας πίνακας, γράφει τη λίστα bytes από αυτόν τον πίνακα.

## Υπογραφή

Τα αρχεία UTF-8 και UTF-16 μπορεί να έχουν μια υπογραφή στην αρχή. Ένα αρχείο UTF-8 έχει τρία οκτάδες για την υπογραφή, ενώ ένα αρχείο UTF-16 έχει δύο οκτάδες.

- Όταν χρησιμοποιείτε τον τύπο `file`, η υπογραφή πρέπει να οριστεί προηγουμένως για να τη διαβάσει. Αυτός ο τύπος μπορεί να χρησιμοποιηθεί μόνο για ανάγνωση αρχείων UTF-8 ή δυαδικών αρχείων.
- Στην περίπτωση του `wfile`, η υπογραφή ορίζεται αυτόματα όταν βρίσκεται στην αρχή του αρχείου. Αυτός ο τύπος μπορεί να χρησιμοποιηθεί μόνο για ανάγνωση αρχείων UTF-16 (UCS-2).

## Τελεστής

- `x in file`: Εάν `x` είναι ένα string, λαμβάνει μια γραμμή από το αρχείο. Εάν `x` είναι ένας πίνακας, προσθέτει τη γραμμή στην κορυφή του πίνακα. Εάν `x` είναι ένας ακέραιος ή ένας δεκαδικός, ανακτά μόνο έναν χαρακτήρα από τη ροή.

## Παράδειγμα

```cpp
file f;
f.open_read(path);
string s;
svector words;
string w;

for (s in f) { // Χρησιμοποιώντας τον τελεστή in
    s = s.trim();
    words = s.split(" ");
    for (w in words)
        print("word:", w, endl);
}

f.close();
```

## Τυπική Είσοδος: stdin

Το Tamgu παρέχει τη μεταβλητή `stdin` για τη χειρισμό της τυπικής εισόδου. Αυτή η μεταβλητή είναι χρήσιμη για τη χειρισμό δεδομένων που προέρχονται από ένα αρχείο που παραδίδεται μέσω αγωγού, για παράδειγμα.

### Παράδειγμα

```cpp
string s;
int i = 1;

for (s in stdin) {
    println(i, s);
    i++;
}
```

Εάν αποθηκεύσετε αυτές τις γραμμές σε ένα μικρό αρχείο, για παράδειγμα `stdin.Tamgu`, τότε το περιεχόμενο των αγωγών θα εμφανιστεί με έναν συγκεκριμένο αριθμό για κάθε γραμμή:

```bash
echo "The lady is happy" | Tamgu stdin.Tamgu
```

### Παράδειγμα (scan)

Ο κείμενος περιέχει γραμμές όπως:
```
456 -0x1.16bca4f9165dep -3 0x1.0d0e44bfeec9p -3
```

```cpp
file f(_current + "tst.txt");
// Ορίστε ένα μακρογραμματικό για να διαβάσετε ένα πολύπλοκο δεκαεξαδικό string
grammar_macros("X", "({%+ -})0x%x+(%.%x+)(p({%+ -})%d+)");
// Διαβάζει τα πρώτα δύο πεδία. Το κενό είναι το προεπιλεγμένο διαχωριστικό.
uvector v = f.scan("%d+ %X ");
println(v); // ['456', ' -0x1.16bca4f9165dep -3']
// Διαβάζει το επόμενο πεδίο.
v = f.scan("%X ");
println(v); // ['0x1.0d0e44bfeec9p -3']
f.close();
```