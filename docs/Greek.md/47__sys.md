# Λειτουργίες του Συστήματος Tamgu

Το Tamgu παρέχει λειτουργίες συστήματος όπως την ανάγνωση του περιεχομένου ενός καταλόγου σε ένα vector ή την εκτέλεση ενός εντολή συστήματος. Εκθέτει τη μεταβλητή `_sys`, η οποία πρέπει να χρησιμοποιηθεί για να έχετε πρόσβαση στις παρακάτω μεθόδους:

## Μέθοδοι

1. `command(string s, string outputfile)`: Εκτελεί την εντολή συστήματος `s`. Το `outputfile` είναι προαιρετικό και χρησιμοποιείται για την ανακατεύθυνση της έξοδου της εντολής (stdout). Εάν παρέχεται το `outputfile`, η `command` επιστρέφει επίσης το περιεχόμενο αυτού του αρχείου ως string.

2. `createdirectory(string path)`: Δημιουργεί έναν κατάλογο για τον δοθέντα `path`. Επιστρέφει false εάν ο κατάλογος υπάρχει ή δεν μπορεί να δημιουργηθεί.

3. `env(string var)`: Επιστρέφει την τιμή της μεταβλητής περιβάλλοντος `var`.

4. `env(string var, string value)`: Ορίζει την τιμή της μεταβλητής περιβάλλοντος `var`.

5. `listdirectory(string path)`: Επιστρέφει τα αρχεία ενός καταλόγου ως vector.

6. `ls(string path)`: Επιστρέφει τα αρχεία ενός καταλόγου ως vector.

7. `mkdir(string path)`: Δημιουργεί έναν κατάλογο για τον δοθέντα `path`. Επιστρέφει false εάν ο κατάλογος υπάρχει ή δεν μπορεί να δημιουργηθεί.

8. `fileinfo(string path)`: Επιστρέφει έναν χάρτη με τις ακόλουθες πληροφορίες για ένα δοθέν αρχείο:
   - `info["size"]`: μέγεθος του αρχείου
   - `info["date"]`: ημερομηνία του αρχείου
   - `info["change"]`: ημερομηνία της τελευταίας αλλαγής
   - `info["access"]`: ημερομηνία της τελευταίας πρόσβασης
   - `info["directory"]`: true εάν το path είναι κατάλογος
   - `info["pathname"]`: το πραγματικό pathname

9. `pipe(string cmd)`: Εκτελεί την εντολή `cmd` και επιστρέφει ένα vector ως αποτέλεσμα που περιέχει την έξοδο αυτής της εντολής.

10. `realpath(string path)`: Επιστρέφει το πραγματικό path για έναν δοθέντα σχετικό path.

11. `getchar()`: Επιστρέφει το τελευταίο πληκτρολογημένο χαρακτήρα. Το `getchar` δεν εμφανίζει τους χαρακτήρες στην οθόνη.

12. `colors(int style, int code1, int code2, bool disp)`: Ορίζει το χρώμα του κειμένου και επιστρέφει το string του χρώματος.

13. `foregroundcolor(int color)`: Ορίζει το χρώμα του προσκηνίου του κειμένου.

14. `backgroundcolor(int color)`: Ορίζει το χρώμα του φόντου του κειμένου.

15. `rgbforegroundcolor(int red, int green, int blue)`: Ορίζει το χρώμα του προσκηνίου του κειμένου με το RGB.

16. `rgbbackgroundcolor(int red, int green, int blue)`: Ορίζει το χρώμα του φόντου του κειμένου με το RGB.

17. `scrollmargin(int top, int bottom)`: Ορίζει την περιοχή του ορίου κύλισης.

18. `deletechar(int nb)`: Διαγράφει `nb` χαρακτήρες.

19. `up(int nb)`: Μετακινείται πάνω `nb` γραμμές.

20. `down(int nb)`: Μετακινείται κάτω `nb` γραμμές.

21. `right(int nb)`: Μετακινείται δεξιά `nb` χαρακτήρες.

22. `left(int nb)`: Μετακινείται αριστερά `nb` χαρακτήρες.

23. `next_line(int nb)`: Μετακινείται στην επόμενη γραμμή κάτω `nb` φορές.

24. `previous_line(int nb)`: Μετακινείται στην προηγούμενη γραμμή πάνω `nb` φορές.

25. `column(int nb)`: Μετακινείται στη στήλη `nb`.

26. `row_column(int row, int column)`: Μετακινείται στη σειρά/στήλη.

27. `home()`: Μετακινεί τον κέρσορα στην αρχική θέση.

28. `cls()`: Καθαρίζει την οθόνη και επιστρέφει στην αρχική θέση.

29. `hor_vert(int hor, int vert)`: Μετακινείται στο hor/vert.

30. `clearscreen(int nb)`: Καθαρίζει την οθόνη. Το `nb` μπορεί να είναι 0, 1, 2 ή 3 για μερική ή πλήρη καθαριότητα της οθόνης.

31. `clear()`: Καθαρίζει την οθόνη.

32. `eraseline(int nb)`: Διαγράφει `nb` γραμμές.

33. `scroll_up(int nb)`: Κυλάει προς τα πάνω `nb` χαρακτήρες.

34. `scroll_down(int nb)`: Κυλάει προς τα κάτω `nb` χαρακτήρες.

35. `screensizes()`: Επιστρέφει το μέγεθος της οθόνης για τις γραμμές και τις στήλες.

36. `hasresized()`: Επιστρέφει 'true' εάν το μέγεθος της οθόνης έχει αλλάξει.

37. `cursor()`: Επιστρέφει τη θέση του κέρσορα.

38. `inmouse()`: Ενεργοποιεί την παρακολούθηση του ποντικιού.

39. `outmouse()`: Απενεργοποιεί την παρακολούθηση του ποντικιού.

40. `ismouseaction(string key)`: Επιστρέφει true εάν είναι μια ενέργεια του ποντικιού.

41. `mousexy(string key)`: Επιστρέφει τη θέση του ποντικιού.

42. `mousescrollup(string key)`: Επιστρέφει τη θέση του ποντικιού όταν γίνεται κύλιση προς τα πάνω.

43. `mousescrolldown(string key)`: Επιστρέφει τη θέση του ποντικιού όταν γίνεται κύλιση προς τα κάτω.

44. `mousedown1(string key)`: Επιστρέφει τη θέση του ποντικιού όταν γίνεται πρωτεύον κλικ.

45. `mousedown2(string key)`: Επιστρέφει τη θέση του ποντικιού όταν γίνεται δευτερεύον κλικ.

46. `mouseup(string key)`: Επιστρέφει τη θέση του ποντικιού όταν γίνεται απελευθέρωση του κουμπιού.

47. `mousetrack(string key)`: Επιστρέφει τη θέση του ποντικιού όταν το ποντίκι κινείται ενώ πατημένο.

48. `reset()`: Επαναφέρει τη λειτουργία του ποντικιού και επιστρέφει στις αρχικές τιμές termios. Χρησιμοποιείται σε μηχανές Unix όταν έχει χρησιμοποιηθεί το `getchar`.

49. `isescapesequence(string key)`: Επιστρέφει true εάν το `key` είναι μια ακολουθία απόδρασης.

50. `showcursor(bool show)`: Εμφανίζει/αποκρύπτει τον κέρσορα.

51. `resizecallback(function f)`: Ορίζει τη συνάρτηση κλήσης που καλείται όταν το παράθυρο του τερματικού αλλάζει μέγεθος. Το `f` είναι μια συνάρτηση με δύο παραμέτρους, οι οποίες είναι τα νέα μεγέθη των γραμμών και των στηλών.

## Παράδειγμα

```javascript
// Αυτή η συνάρτηση αντιγράφει όλα τα αρχεία από έναν δοσμένο κατάλογο σε έναν άλλο, εάν είναι πιο πρόσφατα από μια δοσμένη ημερομηνία
function cp(string thepath, string topath) {
    // Διαβάζουμε το περιεχόμενο του καταλόγου προέλευσης
    vector v = _sys.listdirectory(thepath);
    iterator it;
    string path;
    string cmd;
    map m;
    date t;
    // Ορίζουμε την σημερινή ημερομηνία ξεκινώντας από τις 9 π.μ.
    t.setdate(t.year(), t.month(), t.day(), 9, 0, 0);
    it = v;
    for (it.begin(); it.nend(); it.next()) {
        path = thepath + '/' + it.value();
        // Εάν το αρχείο είναι του σωστού τύπου
        if (".cxx" in path || ".h" in path || ".c" in path) {
            m = _sys.fileinfo(path);
            // Εάν η ημερομηνία είναι πιο πρόσφατη από την τρέχουσα ημερομηνία
            if (m["date"] > t) {
                // Το αντιγράφουμε
                cmd = "copy " + path + ' ' + topath;
                println(cmd);
                // Εκτελούμε την εντολή μας
                _sys.command(cmd);
            }
        }
    }
}

// Καλούμε αυτή τη συνάρτηση για να αντιγράψουμε από έναν κατάλογο σε έναν άλλο
cp('C:\src', 'W:\src');
```

## Μεταβλητές

Ορισμένες μεταβλητές είναι επίσης προσβάσιμες από αυτήν τη βιβλιοθήκη:

- `_sys_keyright`: δεξί βέλος
- `_sys_keyleft`: αριστερό βέλος
- `_sys_keydown`: κάτω βέλος
- `_sys_keyup`: πάνω βέλος
- `_sys_keydel`: πλήκτρο del
- `_sys_keyhomekey`: πλήκτρο home
- `_sys_keyendkey`: πλήκτρο end
- `_sys_keyc_up`: συνδυασμός πλήκτρου control+πάνω βέλος
- `_sys_keyc_down`: συνδυασμός πλήκτρου control+κάτω βέλος
- `_sys_keyc_right`: συνδυασμός πλήκτρου control+δεξί βέλος
- `_sys_keyc_left`: συνδυασμός πλήκτρου control+αριστερό βέλος
- `_sys_keybackspace`: πλήκτρο backspace
- `_sys_keyescape`: πλήκτρο escape

Για τα Windows, έχουν προστεθεί οι παρακάτω μεταβλητές:

- `_sys_keyc_homekey`: συνδυασμός πλήκτρου control+home
- `_sys_keyc_endkey`: συνδυασμός πλήκτρου control+end

Αυτές οι μεταβλητές μπορούν να συγκριθούν με το `getchar`, που επιστρέφει αυτές τις τιμές όταν πατηθεί ένα πλήκτρο.

## Παράδειγμα

```javascript
// Ελέγχουμε εάν πατήθηκε ένας χαρακτήρας
string c = _sys.getchar();
println(c.bytes()); // Εμφανίζουμε το περιεχόμενό του

// Εάν ο χρήστης πατήσει το πάνω βέλος, εμφανίζουμε όλα τα πιθανά χρώματα
if (c == _sys_keyup) {
    for (int i = 0; i < 9; i++) {
        for (int j = 0; j < 99; j++) {
            for (int k = 0; k < 99; k++) {
                _sys.colors(i, j, k);
                println("test:", i, j, k);
            }
        }
    }
}
```

## Παρακολούθηση του Ποντικιού

Μπορείτε επίσης να παρακολουθείτε το ποντίκι στο τερματικό σας. Εδώ υπάρχει ένα παράδειγμα:

```javascript
// Αρχικοποιούμε την παρακολούθηση του ποντικιού
_sys.inmouse();
string u;
u = _sys.getchar();
ivector iv;
while (u.ord() != 17) {
    if (_sys.ismouseaction(u)) {
        iv = _sys.mousedown1(u);
        if (iv != [])
            println("Πρωτεύον κλικ ποντικιού στη θέση:", iv);
        iv = _sys.mousexy(u);
        if (iv != [])
            println("Το ποντίκι είναι στη θέση:", iv);
        iv = _sys.mousescrollup(u);
        if (iv != [])
            println("Το ποντίκι κάνει κύλιση προς τα πάνω στη θέση:", iv);
        iv = _sys.mousescrolldown(u);
        if (iv != [])
            println("Το ποντίκι κάνει κύλιση προς τα κάτω στη θέση:", iv);
    }
    u = _sys.getchar();
}
// Απενεργοποιούμε την παρακολούθηση του ποντικιού και επαναφέρουμε το τερματικό
_sys.reset();
```