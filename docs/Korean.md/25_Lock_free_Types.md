# 락-프리 타입

락-프리 타입은 락이 필요하지 않고 숫자, 문자열, 벡터 또는 맵을 조작할 수 있는 멀티스레드 애플리케이션에서 극도로 유용합니다. 락은 실행 성능에 상당한 영향을 미칠 수 있습니다. 락으로 인해 스레드가 대기 상태로 들어가면 시스템은 해당 스레드의 컨텍스트를 저장하고, 락이 해제되면 다시 활성화해야 합니다. 락-프리 프로그래밍은 실행 흐름에서 비용이 많이 드는 중단을 피하기 위해 락의 사용을 최소화하는 것을 목표로 합니다.

## 테이블과 원시 문자열

이전 섹션에서는 테이블과 원시 문자열이라는 두 가지 락-프리 객체에 대해 설명했습니다.

이러한 객체는 크기가 고정되어 스레드의 컨텍스트 내에서 수정할 수 없는 고유한 특징을 가지고 있습니다. 이는 이러한 객체에 대한 동시 접근이 내부 버퍼 선언에 영향을 주지 않음을 보장합니다.

## 원자 값: a_bool, a_int, a_float, a_string, a_ustring

탐구는 불리언, 정수, 부동 소수점 및 문자열에 대해 다섯 가지 원자 값도 제공합니다. 이러한 객체는 일반적인 값으로 사용될 수 있지만, 동시 접근의 경우 원자성이 보장됩니다. 여기서 원자성은 한 번에 하나의 스레드만 값을 수정할 수 있음을 의미합니다.

## 컨테이너: a_vector, a_[i|f|s|u]vector, a_map [i|f|s|u][i|f|s|u]

탐구는 락의 사용을 최소화하면서 서로 다른 스레드에서 동시에 수정할 수 있는 컨테이너도 제공합니다. 이러한 구조는 해당하는 비-원자 맵과 마찬가지로 사용할 수 있습니다. 이들은 청크의 연결 리스트로 구현되며, 각 청크는 상당한 수의 값을 수용할 수 있습니다. 새 요소가 연결 리스트에 추가될 때만 락이 사용됩니다. 맵이나 벡터가 새 요소를 수용하기에 충분히 크지 않은 경우를 제외하고 대부분의 읽기 및 대부분의 저장 작업은 락 없이 수행됩니다.

참고: a_map은 값 컨테이너이며, a_vector는 객체 컨테이너입니다.

참고: 이러한 맵에 액세스하려면 "allmaps" 라이브러리를 로드해야 합니다.

## 링

"링"은 최대 65535개의 요소를 저장할 수 있는 락-프리 컨테이너입니다. 요소는 앞이나 뒤에서 저장 또는 제거할 수 있는 구조로 구현되어 있습니다. 다른 컨테이너와 달리 이러한 작업은 동일한 메모리 시간 또는 공간 풋프린트를 갖습니다.

## 중요

여러 스레드가 동일한 락-프리 변수를 수정하려고 할 때, 두 가지 수정이 모두 성공할 것을 보장할 수는 없습니다. 마지막으로 변수에 액세스한 스레드가 값을 수정할 수 있습니다.