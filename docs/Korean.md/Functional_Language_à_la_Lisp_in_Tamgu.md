# 함수형 언어: Tamgu에서의 Lisp 스타일

Tamgu는 원래 언어 정의와 매우 유사한 Lisp 인터프리터를 제공하지만 두 가지 중요한 예외가 있습니다:

- Lisp 표현식은 역슬래시 (\\)로 시작해야 합니다.
- 이 언어는 Lisp의 기본 함수와 연산자를 노출시킬 뿐만 아니라 Tamgu 개인 지시문의 사용도 허용합니다.

## 방법

Lisp 인터프리터는 또한 lisp라는 새로운 유형을 노출시킵니다. 이 연산자는 두 가지 메서드만 노출시킵니다:

- `eval(string)`: 문자열을 Lisp 지시문으로 평가한 결과를 반환합니다.
- `load(filename)`: 파일 이름을 로드하고 해당 내용을 평가합니다.

참고: 이 두 가지 지시문에서는 큰따옴표와 역슬래시가 불필요합니다.

**중요:** 파일에서 "과부하된" Lisp를 큰따옴표와 역슬래시를 사용하지 않고 피할 수 있습니다. 이 파일의 처음 두 문자가 `()`인 경우 순수한 Lisp 모드가 트리거됩니다.

```lisp
(defun somme (x y)
  (+ x y)
)

(println (somme 10 20))
(println (somme "a" "b"))
```

## 기본 Lisp 연산자

Tamgu의 Lisp 버전은 다음 함수를 노출시킵니다:

1. `apply`: `(apply f (a1 a2 a3...))`
2. `and`: 이 연산자는 부울 표현식에서 사용됩니다.
3. `append`: 이 연산자는 목록을 연결하는 데 사용됩니다.
4. `atomp`: 요소가 원자인지 확인합니다.
5. `body`: 함수의 본문을 반환합니다.
6. `_takewhile`: 조건을 충족하지 않는 요소가 나올 때까지 요소를 저장합니다. `(_takewhile CMP LIST)`: CMP는 인용된 비교 또는 람다일 수 있습니다. `(_takewhile '(< 10) '(1 2 3 4 10 11 12))`는 `(1 2 3 4)`를 반환합니다.
7. `while`: 루프: `(while cond e1 e2 e3...)`
8. `zerop`: 값이 0인지 확인합니다: `(zerop e)`
9. `_zip`: 목록을 결합합니다: `(_zip '(a b c) '(e f g))`는 `((a e) (b f) (c g))`를 생성합니다.
10. `_zipwith`: 중간 연산 또는 람다와 함께 목록을 결합합니다: `(_zipwith '+ '(1 2) '(3 4) '(5 6))`는 `(9 12)`를 생성합니다.

## 일부 예제

'apply' 예제:

```lisp
(setq f '+)
(apply f '(1 2 3 4))
```

'and' 예제:

```lisp
(and (> i 10) (< i 20))
```

'append' 예제:

```lisp
(append '(a b c) '(e f g)) ; (a b c e f g)를 반환합니다.
```

'block' 예제:

```lisp
(block
  (print 'ok)
  (+ 10 20)
)
```

'while' 예제:

```lisp
(while (< i 10)
  (if (i == 5)
    (break)
  )
)
```

'car, cdr' 예제:

```lisp
(car '(a b c)) ; a를 반환합니다.
(cadr '((a b c d) ef)) ; (b c d)를 반환합니다.
```

'cond' 예제:

```lisp
(cond ((< o 10) (print o)) ((> o 100) (print o)))
```

'cons' 예제:

```lisp
(cons 'a '(b c)) ; (a b c)를 반환합니다.
```

함수 정의:

```lisp
(defun add (x y) (+ x y))
(add 10 20) ; 30을 반환합니다.
```

## 순수한 Lisp 모드

표현식 앞에 역슬래시를 사용해 프로그램에 쉽게 Lisp 지시문을 추가할 수 있습니다.

그러나 콘솔에서 실험하려는 경우 이러한 제약 조건이 언어를 사용하는 데 방해가 될 수 있습니다. `lispmode(bool)`를 도입했으며, 이는 특정한 순수한 Lisp 모드를 트리거합니다. 이 모드에서는 더 이상 이러한 제약 조건이 필요하지 않습니다. 일반 인터프리터로 돌아가려면 `(lispmode false)`를 작성해야 합니다.

Tamgu 셸의 경우 Linux와 Mac OS에서 `tamgu –lisp`를 호출하여이 모드를 활성화할 수 있습니다. 셸 내에서도 `lispmode`를 사용하여 두 모드 사이를 전환할 수 있습니다.

순수한 Lisp 모드를 트리거하는 마지막 방법은 파일의 처음 두 문자로 `()`를 추가하는 것입니다. 파일에 이 두 문자가 포함되어 있으면 들여쓰기기는 괄호를 "중괄호"와 유사한 표현 구분 기호로 간주할 수 있습니다.

예시:

```lisp
()
(defun test(x) (+ x x))
```